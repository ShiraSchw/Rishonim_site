<!DOCTYPE html>
<html lang="he">
<head>
  <meta charset="UTF-8">
  <title>ראשונים על ספרים</title>
  <link rel="stylesheet" href="{{ url_for('static', filename='style.css') }}">
</head>
<body>
  <div class="container">
    <h1>מאגר ראשונים על ספרים</h1>

    {% if category_tree %}
      {% for main_cat, subcats in category_tree.items() %}
        <div class="category-block">
          <div class="category-title">{{ main_cat }}</div>
          <div class="subcategories">
            <ul>
              {% for subcat, nested in subcats.items() %}
                <li>{{ subcat }}
                  {% if nested %}
                    <ul>
                      {% for inner, leaf in nested.items() %}
                        <li>{{ inner }}
                          {% if leaf %}
                            <ul>
                              {% for leaf_item in leaf %}
                                <li>{{ leaf_item }}</li>
                              {% endfor %}
                            </ul>
                          {% endif %}
                        </li>
                      {% endfor %}
                    </ul>
                  {% endif %}
                </li>
              {% endfor %}
            </ul>
          </div>
        </div>
      {% endfor %}
    {% endif %}

    <h2>רשימת ראשונים</h2>
    {% for רשומה in rishonim %}
    <div class="card">
      <strong>שם הספר:</strong> {{ רשומה.book_name }}<br>
      <strong>שם הסופר:</strong> {{ רשומה.author_name }} ({{ רשומה.author_nickname }})<br>
      <strong>שיוך:</strong> {{ רשומה.origin }}<br>
      <strong>פורסם ב:</strong> {{ רשומה.published }}<br>
      <strong>סיווג:</strong> {{ רשומה.category }}
    </div>
    {% endfor %}

    <a href="{{ url_for('app_routes.add.add_rishon') }}">
      <button>הוסף ראשון חדש</button>
    </a>
  </div>
</body>
</html>
